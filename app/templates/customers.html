{% extends "base.html" %}

{% block title %}Πελάτες{% endblock %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6 p-6">

    <div class="w-full md:w-1/3 bg-white p-6 rounded shadow h-fit">
        <h2 class="text-xl font-bold mb-4">Νέος Πελάτης</h2>
        <form method="POST">
            {{ form.hidden_tag() }}

            <div class="mb-3">
                {{ form.customer_type.label(class="block text-sm font-bold text-gray-700") }}
                {{ form.customer_type(class="w-full border p-2 rounded bg-white") }}
            </div>

            <div class="mb-3">
                {{ form.name.label(class="block text-sm font-bold text-gray-700") }}
                {{ form.name(class="w-full border p-2 rounded") }}
            </div>

            <div class="grid grid-cols-2 gap-2 mb-3">
                <div>
                    {{ form.afm.label(class="block text-sm font-bold text-gray-700") }}
                    {{ form.afm(class="w-full border p-2 rounded") }}
                </div>
                <div>
                    {{ form.profession.label(class="block text-sm font-bold text-gray-700") }}
                    {{ form.profession(class="w-full border p-2 rounded") }}
                </div>
            </div>

            <div class="mb-3">
                {{ form.address.label(class="block text-sm font-bold text-gray-700") }}
                {{ form.address(class="w-full border p-2 rounded") }}
            </div>

            <div class="grid grid-cols-2 gap-2 mb-3">
                <div>
                    {{ form.city.label(class="block text-sm font-bold text-gray-700") }}
                    {{ form.city(class="w-full border p-2 rounded") }}
                </div>
                <div>
                    {{ form.postal_code.label(class="block text-sm font-bold text-gray-700") }}
                    {{ form.postal_code(class="w-full border p-2 rounded") }}
                </div>
            </div>

            <div class="mb-3">
                {{ form.email.label(class="block text-sm font-bold text-gray-700") }}
                {{ form.email(class="w-full border p-2 rounded") }}
            </div>

            {{ form.submit(class="w-full bg-blue-600 text-white font-bold py-2 rounded cursor-pointer hover:bg-blue-700") }}
        </form>
    </div>

    <div class="w-full md:w-2/3 bg-white p-6 rounded shadow overflow-auto">
        <h2 class="text-xl font-bold mb-4">Λίστα Πελατών</h2>
        <table class="min-w-full text-left text-sm">
            <thead class="bg-gray-100 border-b">
                <tr>
                    <th class="p-3">Επωνυμία</th>
                    <th class="p-3">Τύπος</th>
                    <th class="p-3">Πόλη</th>
                    <th class="p-3">Email</th>
                </tr>
            </thead>
            <tbody>
                {% for customer in customers %}
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3 font-medium">{{ customer.name }}</td>
                    <td class="p-3">
                        <span class="px-2 py-1 text-xs rounded {{ 'bg-blue-100 text-blue-800' if customer.customer_type == 'B2B' else 'bg-green-100 text-green-800' }}">
                            {{ customer.customer_type }}
                        </span>
                    </td>
                    <td class="p-3">{{ customer.city or '-' }}</td>
                    <td class="p-3">{{ customer.email }}</td>
                </tr>
                {% else %}
                <tr><td colspan="4" class="p-3 text-gray-500">Κανένας πελάτης ακόμα.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}